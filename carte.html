<!DOCTYPE html>
<html lang="FR">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="Lilian Besson and contributors">
    <link rel="shortcut icon" href="css/Rennes_en_Resilience_logo.ico">
    <meta name="description" content="Une carte des commerces ouverts √† 1km pr√®s de chez vous" lang="fr">
    <meta name="description" content="A map of the shops still open nearby at 1km your place in France" lang="en">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#E95420">

    <title>Cartes et outils face au confinement ~ Rennes en R√©silience (#ReR-A)</title>

    <!-- TODO uncomment if not using local storage for the CSS -->
    <link rel="stylesheet" href="css/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" />
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" /> -->

    <!-- TODO uncomment if not using local storage for the javascript -->
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script type="text/javascript" src="js/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="></script>
    <!-- <script type="text/javascript" src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin="" ></script> -->

    <!-- TODO I can add these if I want buttons etc to be closable - it's useless, so... nope? -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/carte.css"/>
    <!-- TODO uncomment if not using local storage for the CSS -->
    <!-- <link id="theme" rel="stylesheet" type="text/css" href="https://bootswatch.com/4/united/bootstrap.min.css"/> -->
    <link rel="stylesheet" type="text/css" href="css/united.css"/>
    <div id="themeChanger"></div>
    <!-- <link rel="stylesheet" type="text/css" href="css/darkly.css"/> -->

    <!-- This piece of javascript gets and sets the coordinate of the user -->
    <script type="text/javascript" src="js/getCenter.js"></script>
    <!-- TODO add integrity, at the end -->
    <script type="text/javascript">
        var url = window.location.href;
        var center = getCenter(48.11165, -1.65732, url);
        var lat = center[0];
        var long = center[1];
        var list_of_functions_to_call_when_latlong_change = [];
    </script>
</head>
<body>

<!-- TODO add global navbar: with direct links to all the h1, h2 of the page ! -->
<div class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary" style="">
    <div class="container">
        <a href="#intro" class="navbar-brand">Rennes en R√©silience</a>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="themes" aria-expanded="false">Th√®me ?<span class="caret"></span></a>
                <div class="dropdown-menu" aria-labelledby="themes">
                    <a class="dropdown-item" href="?theme=day">D√©faut</a>
                    <!-- <div class="dropdown-divider"></div> -->
                    <a class="dropdown-item" href="?theme=night">Nuit</a>
                    <!-- TODO use a button instead! -->
                </div>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link" href="../">Accueil du site web (..)</a>
                </li> -->
                <!-- <li class="nav-item">
                    <a class="nav-link" href="https://RennesenResilience.WordPress.com/">Blog</a>
                </li> -->
                <li class="nav-item">
                    <a class="nav-link" href="#liens">Liens</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#caresteouvert">CaResteOuvert.fr</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#meteo">M√©t√©o</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#1km">1 km</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#10km">10 kms</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#france">France</a>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link" href="../">Site principal ?</a>
                </li> -->
            </ul>
        </div>
    </div>
</div>

<br><br>
<div id="informations">
    <h1 id="intro">
        <a href="#intro">Pand√©mie de coronavirus Covid'19</a>
        <a href="#intro"><span class="alignright"><span class="badge badge-pill badge-primary">¬∂</span></span></a>
    </h1>
    <h2 id="intro">
        <a href="#intro2">Informations par Lilian Besson</a>
        <a href="#intro2"><span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
    </h2>

    <blockquote class="blockquote text-left">
        <div id="attention" class="alert alert-dismissible alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Attention</strong> <a href="#attention" class="alert-link"></a> les informations pr√©sentes ici ne sont <i>pas officielles</i> et <i>garanties comme √©tant fiables</i>.
        </div>
    </blockquote>
    <div id="#changeLocalisation">
        <div class="card border-info mb-3" style="max-width: 90rem;">
            <div class="card-header">
                <h4>
                    A propos de cette page ?
                    <!-- <span class="text-warning">üöß Page web encore en construction ! üöß</span> -->
                    <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
                </h4>
            </div>
            <div class="card-body">
                <!-- <h4 class="card-title">Pour changer sa localisation
                </h4> -->
                <p class="card-text">
                    <p class="text-left">
                        Je suis <b><a target="_blank" href="https://lilian@besson.link/">Lilian Besson</a></b>, jeune prof en informatique √† Rennes, et j'ai √©crit cette page par passion pour le d√©veloppement web, par excitation vis √† vis de toutes ces id√©es sur la r√©silience, et pour le plaisir. <i>J'adore "coder", j'assume !</i>
                        <br>
                        Les informations donn√©es sur cette page me semblent utiles.
                        Je laisse cette page accessible publiquement, tant mieux si elle peut √™tre utile.
                        <a href="https://github.com/Rennes-en-Resilience/Contactez-nous/">Contactez-moi si besoin</a>, pour signaler une erreur ou autre.
                        <br>
                        <i>En cette p√©riode troubl√©e, soyez prudent-e-s, √©coutez les consignes officielles, les conseils du gouvernement, et prenez soin de vos proches, en particulier les plus vuln√©rables et les plus isol√©es. Prenez soin de vous, v√©rifiez vos informations avant de les propager (attention aux infox), bref <b>soyez des humain-e-s exemplaires !</b> Que la force soit avec vous !</i>
                    </p>
                    <h3 class="LilianHandwrittingFont">
                        <blockquote class="blockquote text-right">
                            Merci de me lire, et bienvenue sur cette page web !
                            <br> Sign√© , Lilian Besson - <a target="_blank" href="https://github.com/Naereen/">@Naereen</a>
                        </blockquote>
                    </h3>
                </p>
            </div>
        </div>
    </div>

    <h2>
        <a href="#liens">Liens d'informations <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
    </h2>
    <span class="text-info">A lire tous les jours !</span>

    <ul>
        <li>
            <a target="_blank" href="https://www.gouvernement.fr/info-coronavirus">Informations gouvernementales</a> sur <code>gouvernement.fr/info-coronavirus</code> ;
        </li>
        <li>
            <b>Actualit√©s</b> : <a target="_blank" href="https://www.LeMonde.fr/">Le Monde</a>, <a target="_blank" href="https://www.BFMTV.fr/">BFM TV</a>, ou autres (√ßa peut √™tre int√©ressant de lire une fois par semaine ce que nos pays voisins disent de nous : <a target="_blank" href="https://www.ElPais.com/">en Espagne</a>, <a target="_blank" href="https://www.thetimes.co.uk/">au Royaume-Uni</a> etc, voir aux USA, <a target="_blank" href="https://www.nytimes.com/">√† New York</a> etc) ;
        </li>
        <li>
            <a target="_blank" href="https://rennescovidsolidarite.info/">Informations locales pour Rennes</a> sur <code>RennesCovidSolidarite.info</code>.
        </li>
        <li>
            <a target="_blank" href="https://besson.link/coronavirus.fr.html">Informations concernant mes enseignements et mes activit√©s √† distance</a> (pour moi <a target="_blank" href="https://besson.link/">Lilian Besson</a>).
        </li>
        <li>
            <a target="_blank" href="../conseils-medicaux.html">Cette autre page contient des informations vitales</a> √† propos du <span class="text-warning"></span>Coronavirus Covid 19</span>.
            <br>
            J'avais re√ßu ces conseils d'une amie travaillant √† l'h√¥pital de La Timone, √† Marseille, le dimanche 15 mars 2020.
            Depuis, ils ont √©t√© mis √† jour, selon l'√©volution des connaissances sur le Covid'19.
        </li>
    </ul>
</div>

<br><hr><br>

<div id="caresteouvert">
    <h2>
        <a href="#caresteouvert" id="carte">Carte du site CaResteOuvert.fr <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
    </h2>

    J'inclus ci-dessous la carte de cet outil <b>tr√®s bien fait</b>, que j'ai d√©couvert le 8 avril 2020.
    J'avais comme objectif de coder cela, mais comme √ßa existe d√©j√†, et il est d√©j√† tr√®s bien fait, √©videmment (8 avril 2020) :
    √ßa s'appelle le site <a target="_blank" href="https://www.caresteouvert.fr">CaResteOuvert.fr</a>.
    <br>
    Normalement, j'ai bien cod√© cette petite page web (<a target="_blank" href="https://github.com/Rennes-en-Resilience/Contactez-nous/">dites moi sinon, svp</a> ),
    et ci-dessous s'affichera la carte <a target="_blank" href="https://www.caresteouvert.fr">CaResteOuvert.fr</a> pour <i>votre localisation</i> :
    <br>
    <script type="text/javascript">
        var list_of_functions_to_call_when_latlong_change = [];
    </script>

    <div id="localizationDetails"></div>
    <script type="text/javascript">
        // your content created using DOM methods
        var add_localizationDetails = function (lat, long) {
            document.getElementById("localizationDetails").innerHTML =
                '<br><span class="text-warning">Cette page web a detect√©e que vous √™tes localis√©-e en latitude = '
                + lat + ', et en longitude = ' + long + '.</span>'
                + '<br>Si ce n\'est pas le cas, changez manuellement l\'URL de cette page web, en utilisant soit :'
                + '<ul>'
                    + '<li><a href="#1km@lat,long">le format <code>@48.111,-1.657</code> de OpenStreetMap</a> (ex: <a href="https://besson.link/carte-confinement/#1km@45.04608,1.74527"><code>https://besson.link/carte-confinement/#1km@45.04608,1.74527</code></a>) ;</li>'
                    + '<li><a href="#1km?lat=48.111&long=">le format <code>?lat=48.111,long=1.657</code> d\'une page web "classique" avec des param√®tres</a> (ex: <a target="_blank" href="https://besson.link/carte-confinement/#1km?lat=45.04608&long=1.74527"><code>https://besson.link/carte-confinement/#1km?lat=45.04608&long=1.74527</code></a>).</li>'
                + '</ul>'
            ;
            };

        // TODO this should be called whenever the lat/long is changed
        list_of_functions_to_call_when_latlong_change.push(add_localizationDetails);
        add_localizationDetails(lat, long);
    </script>

    <p class="text-left">
        Je transmets ici √† tous des informations <i>partielles</i>, <i>pas √† jour</i>, listant les commerces que j'ai d√©tect√© comme √©tant encore ouverts durant cette √©trange p√©riode de confinement
        (derni√®re mise √† jour : <code id="lastTimeStamp">2020-04-14 10:23</code> environ).
    </p>
    <br>

    <div id="iframe_CaResteOuvert">
        <noscript>
            JavaScript semble d√©sactivit√© ici, donc j'inclus la carte par d√©faut, centr√©e chez moi :
            <iframe height="85%" width="90%" src="https://www.caresteouvert.fr/@48.112735,-1.658536,15.74/"></iframe>
        </noscript>
    </div>
    <!-- XXX comment to hide the IFrame to https://www.CaResteOuvert.fr -->
    <script type="text/javascript">
        // your content created using DOM methods
        var add_IFrame_CaResteOuvert = function(lat, long) {
            document.getElementById("iframe_CaResteOuvert").innerHTML =
                '<iframe height="850px" width="98%" src="https://www.caresteouvert.fr/@'
                + lat + ',' + long + ',15"></iframe>'
            ;
        };
        // TODO this should be called whenever the lat/long is changed
        list_of_functions_to_call_when_latlong_change.push(add_IFrame_CaResteOuvert);
        add_IFrame_CaResteOuvert(lat, long);
    </script>

    <!-- FIXED also add the weather forecast -->
    <div id="a_DarkSky">
        <noscript>
            JavaScript semble d√©sactivit√© ici, donc j'inclus la m√©t√©o par d√©faut, centr√©e chez moi :
            <a href="https://darksky.net/forecast/48.112735,-1.658536/si24/fr/">m√©t√©o √† <code>lat = 48.112735, long = -1.658536</code></a>.
        </noscript>
    </div>
    <script type="text/javascript">
        var add_IFrame_DarkSky = function(lat, long) {
            document.getElementById("a_DarkSky").innerHTML =
                '<br><hr><br>'
                + '<h2><a href="#meteo" id="meteo">M√©t√©o locale ? <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a></h2>'
                + 'Voulez-vous consulter la m√©t√©o de votre lieu de vie ? Allez sur <a target="_blank" href="https://darksky.net/forecast/'
                + lat + ',' + long + '/si24/fr">ce site (DarkSky.net √† <code>lat = ' + lat + '</code> et <code>long = ' + long + '</code>)</a>.';
        };
        // TODO this should be called whenever the lat/long is changed
        list_of_functions_to_call_when_latlong_change.push(add_IFrame_DarkSky);
        add_IFrame_DarkSky(lat, long);
    </script>
</div>

<br><hr><br>

<div id="mescartes">
    <div id="carte">
        <h2>
            <a id="1km" href="#1km">Carte √† un kilom√®tre autour de chez vous <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
        </h2>

        Suivant les recommandations du gouvernement, je limite mes sorties autour de <a target="_blank" href="https://besson.link/callme.fr.html#maison">chez moi</a>, √† moins d'un kilom√®tre aux alentours.
        <br>
        <span class="text-warning">Je trouve difficile de bien visualiser un kilom√®tre repr√©sente sur une carte</span>,
        donc sur la carte ci-dessous, j'ai choisi de colorer en :
        <ul>
            <li><span style="color: rgb(255,  50, 0)">ce rouge</span> le cercle de rayon <b>1 km</b> ;</li>
            <li><span style="color: rgb(255, 100, 0)">ce ton de orange</span> le cercle de rayon <b>750 m</b> ;</li>
            <li><span style="color: rgb(255, 150, 0)">ce orange</span> le cercle de rayon <b>500 m</b> ;</li>
            <li><span style="color: rgb(255, 200, 0)">ce ton de orange</span> le cercle de rayon <b>250 m</b> ;</li>
            <li><span style="color: rgb(255, 225, 0)">ce ton de jaune</span> le cercle de rayon <b>100 m</b> ;</li>
            <li><span style="color: rgb(255, 255, 0)">ce jaune</span> le cercle de rayon <b>50 m</b>.</li>
        </ul>

        <div class="map" id="neighborhood"></div>
        <script type="text/javascript">
            // TODO all this piece of javascript has to be wrapped in a function, to be updated easily when the sliders above change their values!
            var add_neighborhood = function(lat, long) {
                var center = [lat, long];
                var neighborhood = L.map("neighborhood").setView(center, 15); // XXX 15 is zoom level

                /*
                L.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png", {
                    attribution: "&copy; Lilian Besson for shops data etc, &copy; <a target='_blank' href='https://osm.org/copyright'>OpenStreetMap</a> contributors for the rest"
                }).addTo(neighborhood);
                */

                /*
                FIXED I now use my own access token for the MapBox API
                */
                L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmFlcmVlbiIsImEiOiJjazh1M24zOW0wMTE5M2VwMzEycmRuNHEwIn0.qaOYJQNzdoi87pm3_BkwfA', {
                    maxZoom: 18,
                    attribution: 'Map data &copy; <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                        '<a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                        'Imagery ¬© <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>',
                    id: 'mapbox/streets-v11',
                    tileSize: 512,
                    zoomOffset: -1
                }).addTo(neighborhood);
                /*
                */

                // List of markers

                // ------ #1 - My places : home, offices ------
                var my_places = [];
                /*
                    my_home = L.marker(center);
                    my_places.push(my_home)
                    my_home.addTo(neighborhood);
                    my_home.bindPopup("Dr Lilian Besson,<br>23, boulevard Jeanne d'Arc,<br>35000 - Rennes,<br>France.");
                    my_home.openPopup();
                */

                    my_home = L.marker(center);
                    my_places.push(my_home)
                    my_home.addTo(neighborhood);
                    // my_home.bindPopup("Dr Lilian Besson,<br>23, boulevard Jeanne d'Arc,<br>35000 - Rennes,<br>France.");
                    my_home.bindPopup("Centre de la carte (@" + lat + "," + long + ")<br>France.");
                    my_home.openPopup();

                createCircle(neighborhood, center, 1000, 0.1,   'rgb(255,  50, 0)');
                createCircle(neighborhood, center,  750, 0.1,   'rgb(255, 100, 0)');
                createCircle(neighborhood, center,  500, 0.075, 'rgb(255, 150, 0)');
                createCircle(neighborhood, center,  250, 0.075, 'rgb(255, 200, 0)');
                createCircle(neighborhood, center,  100, 0.075, 'rgb(255, 225, 0)');
                createCircle(neighborhood, center,  50,  0.075, 'rgb(255, 255, 0)');
                // TODO add data for other offices,
            };

            // TODO this should be called whenever the lat/long is changed
            list_of_functions_to_call_when_latlong_change.push(add_neighborhood);
            add_neighborhood(lat, long);
        </script>

        <h2 class="text-warning" id="todo"><a href="#todo">
            √Ä faire <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
        </h2>
        <b>Ajouter moi-m√™me les donn√©es pour</b>
        <ul>
            <li>les <i>pharmacies</i>, laboratoires d'analyse m√©dicales ;</li>
            <li>les <i>practiciens de sant√©</i> ;</li>
            <li>les <i>boulangeries et sup√©rettes</i> ;</li>
            <li>les <i>autres</i> commerces utiles ;</li>
            <li>les commerces moins utiles.</li>
        </ul>
        (en m√™me temps, <a target="_blank" href="https://www.caresteouvert.fr">CaResteOuvert.fr</a> le fait tr√®s bien, donc peut-√™tre que c'est inutile d'esp√©rer le faire moi-m√™me aussi...)
        <br>
        On m'a aussi parl√© de cet outil : <a target="_blank" href="https://www.esrifrance.fr/covid-19-confinement/"><code>www.ESRIFrance.fr/covid-19-confinement</code></a>, qui fonctionne aussi tr√®s bien (11/04/20).
    </div>

    <br><hr><br>

    <!-- XXX seconde carte -->
    <div id="#secondecarte">
        <h2>
            <a id="10km" href="#10km">Carte √† <i>dix kilom√®tres</i> autour de chez moi <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
        </h2>
        C'est plus facile de se repr√©senter un, deux, trois, quatre ou cinq kilom√®tres en milieu urbain, je trouve.
        En effet, en marchant dans une ville que l'on connait et d'un bon pas, ils correspondent en gros √† quinze, trente, quarante, cinquante minutes et une heure de marche.
        <br>
        Dans la seconde carte, je colore donc en :
        <ul>
            <li><span style="color: rgb(0, 255, 255)">ce ton de cyan</span> le cercle de rayon <b>10 km</b> ;</li>
            <li><span style="color: rgb(0, 200, 255)">ce ton de cyan</span> le cercle de rayon <b>5 km</b> ;</li>
            <li><span style="color: rgb(0, 150, 255)">ce ton de bleu</span> le cercle de rayon <b>4 km</b> ;</li>
            <li><span style="color: rgb(0, 100, 255)">ce ton de bleu clair</span> le cercle de rayon <b>3 km</b> ;</li>
            <li><span style="color: rgb(0, 50, 255)">ce ton de bleu</span> le cercle de rayon <b>2 km</b> ;</li>
            <li><span style="color: rgb(0, 0, 255)">ce ton de bleu fonc√©</span> le cercle de rayon <b>1 km</b>.</li>
        </ul>

        <div class="map" id="neighborhood_unzoomed"></div>
    </div>

    <script type="text/javascript">
        var add_neighborhood_unzoomed = function(lat, long) {
            var center_unzoomed = center;
            var neighborhood_unzoomed = L.map("neighborhood_unzoomed").setView(center_unzoomed, 13); // XXX 13 is zoom level

            /*
            L.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png", {
                attribution: "&copy; Lilian Besson for shops data etc, &copy; <a target="_blank" href='https://osm.org/copyright'>OpenStreetMap</a> contributors for the rest"
            }).addTo(neighborhood_unzoomed);
            */

            /*
            FIXED I now use my own access token for the MapBox API
            */
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmFlcmVlbiIsImEiOiJjazh1M24zOW0wMTE5M2VwMzEycmRuNHEwIn0.qaOYJQNzdoi87pm3_BkwfA', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                    '<a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                    'Imagery ¬© <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>',
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1
            }).addTo(neighborhood_unzoomed);
            /*
            */

            // List of markers
            // ------ #1 - My places : home, offices ------
            var my_places_unzoomed = [];
                my_home_unzoomed = L.marker(center_unzoomed);
                my_places_unzoomed.push(my_home_unzoomed)
                my_home_unzoomed.addTo(neighborhood_unzoomed);
                // my_home_unzoomed.bindPopup("Dr Lilian Besson,<br>23, boulevard Jeanne d'Arc,<br>35000 - Rennes,<br>France.");
                my_home_unzoomed.bindPopup("Centre de la carte (@" + lat + "," + long + ")<br>France.");
                my_home_unzoomed.openPopup();

            createCircle(neighborhood_unzoomed, center_unzoomed, 10000, 0.075, 'rgb(0, 255, 255)');
            createCircle(neighborhood_unzoomed, center_unzoomed,  5000, 0.075, 'rgb(0, 200, 255)');
            createCircle(neighborhood_unzoomed, center_unzoomed,  4000, 0.075, 'rgb(0, 150, 255)');
            createCircle(neighborhood_unzoomed, center_unzoomed,  3000, 0.075, 'rgb(0, 100, 255)');
            createCircle(neighborhood_unzoomed, center_unzoomed,  2000, 0.075, 'rgb(0,  50, 255)');
            createCircle(neighborhood_unzoomed, center_unzoomed,  1000, 0.075, 'rgb(0,   0, 255)');
        };

        // TODO this should be called whenever the lat/long is changed
        list_of_functions_to_call_when_latlong_change.push(add_neighborhood_unzoomed);
        add_neighborhood_unzoomed(lat, long);
    </script>

    <br><hr><br>
    <!-- XXX troisieme carte -->
    <div id="#troisiemecarte">
        <h2>
            <a id="france" href="#france">Carte <i>de toute la France</i><span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
        </h2>
        <div class="map" id="whole_france"></div>
    </div>

    <script type="text/javascript">
        var add_whole_france = function(lat, long) {
            var center_unzoomed = center;
            var whole_france = L.map("whole_france").setView(center_unzoomed, 7); // XXX 13 is zoom level
            /*
            L.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png", {
                attribution: "&copy; Lilian Besson for shops data etc, &copy; <a target="_blank" href='https://osm.org/copyright'>OpenStreetMap</a> contributors for the rest"
            }).addTo(whole_france);
            */
            /*
            FIXED I now use my own access token for the MapBox API
            */
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmFlcmVlbiIsImEiOiJjazh1M24zOW0wMTE5M2VwMzEycmRuNHEwIn0.qaOYJQNzdoi87pm3_BkwfA', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                    '<a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                    'Imagery ¬© <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>',
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1
            }).addTo(whole_france);
            /*
            */

            // List of markers
            // ------ #1 - My places : home, offices ------
            var my_places_whole = [];
            my_home_whole = L.marker(center_whole);
            my_places_whole.push(my_home_whole)
            my_home_whole.addTo(whole_france);
            // my_home_whole.bindPopup("Dr Lilian Besson,<br>23, boulevard Jeanne d'Arc,<br>35000 - Rennes,<br>France.");
            my_home_whole.bindPopup("Centre de la carte (@" + lat + "," + long + ")<br>France.");
            my_home_whole.openPopup();

            createCircle(whole_france, center_unzoomed, 10000, 0.075, 'rgb(0, 255, 255)');
        };

        // TODO this should be called whenever the lat/long is changed
        list_of_functions_to_call_when_latlong_change.push(add_whole_france);
        add_whole_france(lat, long);
    </script>

    <br><hr><br>
    <!-- XXX changer sa localisation -->
    <!-- TODO move this AFTER the two maps? -->
    <div id="#changeLocalisation">
        <div class="card border-info mb-3" style="max-width: 90rem;">
            <div class="card-header">
                <h4>
                    Changer sa localisation ?
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                </h4>
            </div>
            <div class="card-body">
                <!-- <h4 class="card-title">
                    Pour changer sa localisation
                </h4> -->
                <p class="card-text">
                    Utiliser les deux glissi√®res ci-dessous pour la <b>latitude (sud ‚Üí nord)</b> et <b>longitude (ouest ‚Üí est)</b>.
                    <button type="submit" class="btn btn-primary offset-lg-1">Mettre √† jour</button>
                </p>
            </div>
            <form class="center">
                <fieldset class="form-group">
                    <!-- <legend style="margin-left: 5rem;">Sliders</legend> -->
                    <div class="row">
                        <div class="col-lg-4 offset-lg-1">
                            <label for="lat">
                                Latitude = <span id="lat"> 48.11165 </span>
                                <br>(<code>min sud 41.30 ‚Üí max nord 51.10</code>)
                            </label>
                            <input type="range" min="41.30" max="51.10" step="0.01" class="custom-range" value="48.11165" id="range_lat">
                        </div>
                        <div class="col-lg-4 offset-lg-1">
                            <label for="long">
                                Longitude = <span id="long"> -1.65732 </span>
                                <br>(<code>min est -5.14 ‚Üí max ouest 8.24</code>)
                            </label>
                            <input type="range" min="-5.14" max="8.24" step="0.01" class="custom-range" value="-1.65732" id="range_long">
                        </div>
                    </div>
                </fieldset>
                <!-- TODO these sliders work well but how to continuously update some piece of code, using their values. Cf. https://stackoverflow.com/a/26946264/ -->
                <script type="text/javascript">
                    document.getElementById("range_lat").addEventListener("change", function (evt) {
                        lat = this.value;
                        center[0] = lat;
                        document.getElementById("lat").innerHTML = parseFloat(this.value);
                        for (let i = 0; i < list_of_functions_to_call_when_latlong_change.length; i++) {
                            var func = list_of_functions_to_call_when_latlong_change[i];
                            func(lat, long);
                        };
                    });
                    document.getElementById("range_long").addEventListener("change", function (evt) {
                        long = this.value;
                        center[1] = long;
                        document.getElementById("long").innerHTML = parseFloat(this.value);
                        for (let i = 0; i < list_of_functions_to_call_when_latlong_change.length; i++) {
                            var func = list_of_functions_to_call_when_latlong_change[i];
                            func(lat, long);
                        };
                    });
                </script>
                </fieldset>
            </form>
        </div>
    </div>

    <footer>
        <h2 id="conclusion">
            <a href="#conclusion">Conclusion et licence <span class="alignright"><span class="badge badge-pill badge-secondary">¬∂</span></span></a>
        </h2>

        <div class="alert alert-dismissible alert-success">
            <!-- TODO add bootstrap.js to have interactive elements -->
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <!-- <strong>Heads up!</strong> This <a href="#" class="alert-link">alert needs your attention</a>, but it's not super important. -->
            <blockquote class="blockquote text-right">
                <p class="mb-0"><small>
                    "Je ne vois pas un √©tat de guerre, je vois un √©tat de si√®ge. Comme une  citadelle assi√©g√©e, tout est √† l‚Äôarr√™t, et pour tenir le plus longtemps possible, confin√©s, il nous faut prendre soin les uns des autres, <b>r√©duire nos besoins</b>, partager. L'ennemi n‚Äôest pas ext√©rieur mais int√©rieur, nous devons revoir notre rapport au monde..."
                </small></p>
                <footer class="blockquote-footer">
                    Pablo Servigne dans
                    <cite title="Source Title"><a target="_blank" href="https://www.facebook.com/xrfrance/posts/2461856240756038">cette interview</a> dans Le Monde du 13/04/20</cite>
                </footer>
            </blockquote>
        </div>

        <div class="alert alert-dismissible alert-warning">
            <!-- TODO add bootstrap.js to have interactive elements -->
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <!-- <strong>Heads up!</strong> This <a href="#" class="alert-link">alert needs your attention</a>, but it's not super important. -->
            <blockquote class="blockquote text-right">
                <p class="mb-0"><small>
                    "Il nous faudra b√¢tir une strat√©gie o√π nous retrouverons le temps long, la possibilit√© de planifier, <b>la sobri√©t√© carbone</b>, la pr√©vention, <b>la r√©silience qui seules peuvent permettre de faire face aux crises √† venir</b>."
                </small></p>
                <footer class="blockquote-footer">
                    notre pr√©sident Emmanuel Macron dans
                    <cite title="Source Title"><a target="_blank" href="https://www.lemonde.fr/politique/article/2020/04/13/nous-tiendrons-l-integralite-du-discours-d-emmanuel-macron_6036480_823448.html">son discours du lundi 13 avril 2020</a></cite>
                </footer>
            </blockquote>
        </div>

        <p class="text-left">
            Ce document a √©t√© √©crit par Lilian Besson et les membres de <a target="_blank" href="https://github.com/Rennes-en-Resilience/">@Rennes-en-Resilience</a>, en utilisant notamment <a target="_blank" href="https://leafletjs.com/">Leaflet.js</a>, <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a>, et <a target="_blank" href="https://www.GitHub.com/">GitHub</a>.
            Ce projet est <a target="_blank" href="https://lbesson.mit-license.org/">libre et distribu√© sous licence, selon les conditions de la License MIT</a>,
            et les sources sont disponibles dans <a target="_blank" href="https://github.com/Rennes-en-Resilience/Cartes-des-commerces-resilients">ce d√©p√¥t GitHub</a> sur <code>github.com/Rennes-en-Resilience/Cartes-des-commerces-resilients</code>.
            N'h√©sitez pas √† participer, √† me faire part de votre avis, de vos suggestions etc !
            Via ce formulaire <a target="_blank" href="https://github.com/Rennes-en-Resilience/Contactez-nous/" target="_blank">sur GitHub</a>, ou par email <code>Rennes.en.Resilience</code> <code>@</code> <code>LaPoste.net</code> ou <code>ProtonMail.com</code>.
        </p>
        <!-- <br> -->
        <p class="text-left">
            Bidouill√© avec amour,
            et un peu aussi par <a target="_blank" href="TalkAboutGlobalWarmingNow.png">peur du r√©chauffement climatique</a> (cf <a target="_blank" href="https://questionablecontent.net">QuestionableContent.net</a>),
            par <span class="love">&hearts;</span> <a target="_blank" href="https://GitHub.com/Naereen/">Lilian Besson (Naereen)</a> <a target="_blank" href="https://github.com/Rennes-en-Resilience/Cartes-des-commerces-resilients/graphs/contributors">et d'autres</a>.
        </p>
        <!-- <br> -->
        <p class="text-center">
            Copyright ¬© <a target="_blank" href="https://GitHub.com/Naereen/">Lilian Besson (Naereen)</a> et <a target="_blank" href="https://github.com/Rennes-en-Resilience/Cartes-des-commerces-resilients/graphs/contributors">autres contributeurs</a>, 2020, sous licence MIT.
        </p>
        <!-- <br> -->
        <p class="text-right">
            Je fonctionne selon <a target="_blank" href="https://wiki.lesswrong.com/wiki/Crocker's_rules">les r√®gles de Crocker</a>, alors n'h√©sitez pas √† parler franchement et simplement.
            <br>
            Les opinions sont les miennes : je ne parle pas au nom de mes employeurs, qu'ils soient pass√©s, pr√©sents ou futurs.
        </p>
        <br>
        <h3 class="LilianHandwrittingFont">
            <blockquote class="blockquote text-right">
                Que la force soit avec vous !
                <br>
                Merci de m ' avoir lu ! Sign√© , Lilian Besson - <a target="_blank" href="https://github.com/Naereen/">@Naereen</a>
            </blockquote>
        </h3>
    </footer>

</div>
</body>
<script type="text/javascript" src="https://besson.link/_static/ga.js"></script>
<noscript><img style="visibility: hidden; display: none;" alt="GA|Analytics" src="https://ga-beacon.appspot.com/UA-38514290-1/carte-confinement/?pixel" /></noscript>
</html>
